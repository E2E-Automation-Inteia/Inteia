<div class="w-full px-4 py-6">
    <h1 class="text-3xl font-extrabold text-[#003087] mb-6">Oportunidades</h1>
  
    <div class="relative overflow-x-auto shadow-xl rounded-xl border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-900">
      <table class="w-full text-sm text-left text-gray-700 dark:text-gray-300">
        <thead class="uppercase text-xs text-gray-500 bg-gray-100 dark:bg-gray-800 dark:text-gray-400">
          <tr>
            <th class="px-6 py-4">Proceso</th>
            <th class="px-6 py-4">Descripción</th>
            <th class="px-6 py-4">Depto</th>
            <th class="px-6 py-4">Fecha Límite</th>
            <th class="px-6 py-4">Postulable</th>
            <th class="px-6 py-4">Convocatoria</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let oportunidad of oportunidades; let idx = index" [ngClass]="{'opacity-50 ': !oportunidad.esPostulable}">
            <td class="px-6 py-4 font-bold text-indigo-600">{{ oportunidad.idProceso }}</td>
            
            <td class="px-6 py-4 w-[300px] max-w-[300px]">
              <div class="relative">
                <div
                  class="overflow-hidden text-gray-700transition-[max-height] duration-700 ease-in-out"
                  [ngClass]="expandedRow === idx ? 'max-h-[500px]' : 'max-h-[2.5rem] line-clamp-2'"
                >
                  <p class="whitespace-pre-wrap">{{ oportunidad.descripcion }}</p>
                </div>
                <div class="mt-1">
                  <button
                    class="text-indigo-500 text-xs cursor-pointer hover:underline"
                    (click)="toggleExpand(idx)"
                  >
                    {{ expandedRow === idx ? 'Ver menos ▲' : 'Ver más ▼' }}
                  </button>
                </div>
              </div>
            </td>
  
            <td class="px-6 py-4">{{ oportunidad.departamento }}</td>
            <td class="px-6 py-4">{{ oportunidad.fechaMaximaPostulacion }}</td>
  
            <td class="px-6 py-4">
                <label class="inline-flex items-center cursor-pointer">
                  <input
                    type="checkbox"
                    class="sr-only peer"
                    [checked]="oportunidad.esPostulable"
                    (click)="togglePostulable(idx)"
                  />
                  <div class="w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-2 peer-focus:ring-orange-600 rounded-full peer dark:bg-gray-700 peer-checked:bg-orange-600 transition-colors"></div>
                </label>
              </td>              
  
            <td class="px-6 py-4">
              <a
                [href]="oportunidad.urlConvocatoria"
                target="_blank"
                rel="noopener noreferrer"
                class="text-indigo-500 hover:underline"
              >
                Ver enlace
              </a>
            </td>
          </tr>
  
          <tr *ngIf="oportunidades.length === 0">
            <td colspan="6" class="text-center text-gray-400 py-6">No hay oportunidades disponibles.</td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
  